<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Prevent, to some degree, the execution of inline JavaScript, as well as blocking all plugin content  -->
		<meta http-equiv="Content-Security-Policy" content="script-src 'none'; object-src 'none'; img-src 'none'; font-src 'none'; media-src 'none'; worker-src 'none'; connect-src 'none'; style-src 'self' ">
		<title>WebKit Features in Safari 18.2</title>
		<link rel="icon" href="favicon.png" />
		<link rel="stylesheet" href="/a11y-dark.css">
		<link rel="stylesheet" href="/style.css">
	</head>
	<body>
		<main>
		<a target="_blank" rel="noreferrer" href="https://webkit.org/blog/16301/webkit-features-in-safari-18-2/">Go to article URL</a>
		<div id="content"><p></p><p>Today marks the arrival of Safari 18.2. With it, WebKit adds 61 new features and 111 resolved issues. Highlights include cross-document View Transitions, the ability to fill a border with a background, spatial videos in visionOS, ruby improvements,  <code>input type=week</code> on iOS, iPadOS &amp; visionOS, WASM garbage collection, HTTPS by default, Genmoji, and more.</p>
<p>Safari 18.2 is available on iOS 18.2, iPadOS 18.2, visionOS 2.2, macOS Sequoia 15.2, macOS Sonoma and macOS Ventura.</p>
<h2><a name="css" rel="noreferrer" target="_blank"></a>CSS</h2>
<h3><a name="text-box" rel="noreferrer" target="_blank"></a>Text box</h3>
<p>If you write CSS, you’ve probably struggled at some point to optically center text vertically in a box, or to get a headline to line up with the top of an image. Now you can declare which font metric you want the browser to consider the edge of the text box when calculating layout:</p>
<div class="text-box-example"></div>
<pre><code class="css"><span class="keyword">h2</span> {
  <span class="attribute">text-box</span>: <span class="identifier">trim-start</span> <span class="identifier">cap</span>;
}
</code></pre>
<p>This means “please do trim the start edge (above the headline) at the cap line”.  You can see the effect on the right, where the top of the “H” lines up with the top of the image:</p>
<figure class="mattewhite"><picture><source srcset="https://webkit.org/wp-content/uploads/text-box-dark.png" type="image/png" media="(prefers-color-scheme: dark)"></picture><figcaption>Learn more by exploring <a href="https://codepen.io/jensimmons/pen/gbYMERz/d04ddec1bd31a5ce3792d3bfcb34dffb??editors=1100" rel="noreferrer" target="_blank">this demo</a> in Safari 18.2.</figcaption></figure>
<p>Originally called “leading trim”, this feature is now simply <code>text-box</code>. It’s a shorthand for two longhands properties— <code>text-box-trim</code> and <code>text-box-edge</code> — which you can declare separately if you need to control how each cascades. Safari 18.2 is the first <a href="https://caniuse.com/css-text-box-trim" rel="noreferrer" target="_blank">browser to ship</a> Text Box, but you can use it today to progressively enhance your design, while browsers without support simply fallback to the older bahavior.</p>
<h3><a name="view-transitions" rel="noreferrer" target="_blank"></a>View Transitions</h3>
<p>WebKit for Safari 18.2 adds support for cross-document <a href="https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API/Using" rel="noreferrer" target="_blank">View Transitions</a> with <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@view-transition" rel="noreferrer" target="_blank"><code>@view-transition</code></a>. This provides a mechanism for easily animating across webpages. It’s especially handy if you are making an app experience  where you don’t want users to experience a reload when moving from one page to another. Instead, with View Transitions you can crossfade, swipe, hold steady only changing the new content, and more.</p>
<p>Building on our original support for View Transitions that shipped in <a href="https://webkit.org/blog/15865/webkit-features-in-safari-18-0/" rel="noreferrer" target="_blank">Safari 18.0</a>, WebKit for Safari 18.2 adds support for <code>view-transition-name: auto</code>. This means you won’t have to individually name potentially hundreds of different content items if you are applying transitions to the content on a single page. We ran into this problem when we created <a href="https://webkit.org/demos/grid3/photos/" rel="noreferrer" target="_blank">this masonry-layout demo</a> (switch to “Combined with View Transitions” layout with pulldown menu). With 80 items on the page, we had to write 80 separate lines of code like <code>.card:nth-child(80) { view-transition-name: card-80; }</code> over and over. In the real world, you couldn’t rely on there never being an 81st item, yet more-than-expected items would break the transitions. Now instead, we can just declare <code>.card { view-transition-name: auto }</code> and let the browser figure out the details.</p>
<p>WebKit for Safari 18.2 also adds support for View Transition Classes and View Transition Types. Classes allow you to easily share styles between different view transitions. It can be used very nicely in combination with <code>view-transition-name: auto</code> . Types allow you to define different variants for the same view transition (e.g. slide-in from the right vs. slide-in from the left for a carousel).</p>
<p>And Safari 18.2 adds support for the <code>pageswap</code> and <code>pagereveal</code> events for View Transitions.</p>
<h3><a name="backgrounds-on-borders" rel="noreferrer" target="_blank"></a>Backgrounds on borders</h3>
<p>WebKit for Safari 18.2 adds support for  <code>background-clip: border-area</code>. It allows you to put a background on a box, and clip that background to only appear in the area where the border exists. It combines nicely with <code>background-clip: text</code> to create interesting visual effects.</p>
<figure class="mattewhite fill-image border-area"><picture><source srcset="https://webkit.org/wp-content/uploads/border-area-dark.jpg" type="image/png" media="(prefers-color-scheme: dark)"></picture></figure>
<p>In this example, we can apply a photo of a wooden table as a background to the box, twice. And then clip each background to the border-area and the text respectively.</p>
<pre><code class="css"><span class="keyword">header</span> {
  <span class="attribute">border-width</span>: <span class="number">30px</span> <span class="identifier">solid</span> <span class="identifier">transparent</span>;
  <span class="attribute">background-image</span>: <span class="char">url("wooden-table.jpg")</span>,
                    <span class="char">url("wooden-table.jpg")</span>;
  <span class="attribute">background-size</span>: <span class="identifier">cover</span>;
  <span class="attribute">background-origin</span>: <span class="identifier">border-box</span>;
  <span class="attribute">background-clip</span>: <span class="identifier">border-area</span>,
                   <span class="identifier">text</span>;
}
</code></pre>
<p>For much more about how it works, read <a href="https://webkit.org/blog/16214/background-clip-border-area/" rel="noreferrer" target="_blank">Make creative borders with background-clip: border-area.</a></p>
<h3><a name="division-by-units-and-other-complex-calculations" rel="noreferrer" target="_blank"></a>Division by units and other complex calculations</h3>
<p>WebKit for Safari 18.2 updates the <code>calc()</code> function to the most recent web standard, opening up many new possibilities — including dividing by numbers with units. For example, you can convert the current viewport width to pixels with <code>calc(100vw / 1px)</code>. Scott Kellum <a href="https://typetura.com/blog/unit-division-with-css-and-fallbacks/" rel="noreferrer" target="_blank">created a demo</a> where the background color of the page is determined by the width of the viewport with this:</p>
<pre><code class="css"><span class="keyword">html</span> {
  <span class="attribute">background</span>: <span class="identifier">hsl</span>(<span class="identifier">calc</span>(<span class="number">100</span><span class="identifier">vw</span> / <span class="number">1px</span> * <span class="number">0.2deg</span>), <span class="number">100%</span>, <span class="number">80%</span>);
}
</code></pre>
<h3><a name="sidelines" rel="noreferrer" target="_blank"></a>Sidelines</h3>
<p>WebKit for Safari 18.2 adds support for <code>text-underline-position: left</code> and  <code>text-underline-position: right</code>. This lets you shift the position of a sideline to the other side.</p>
<pre><code class="css"><span class="preprocessor">:root</span> {
  <span class="attribute">writing-mode</span>: <span class="identifier">vertical-rl</span>;
}
[<span class="identifier">lang</span>]<span class="preprocessor">:lang</span>(<span class="keyword">ja</span>) { 
  <span class="attribute">text-underline-position</span>: <span class="identifier">right</span>; 
} 
[<span class="identifier">lang</span>]<span class="preprocessor">:not</span>(<span class="preprocessor">:lang</span>(<span class="keyword">ja</span>)) { 
  <span class="attribute">text-underline-position</span>: <span class="identifier">under</span>; 
}
</code></pre>
<figure class="mattewhite fill-image ruby"><picture><source srcset="https://webkit.org/wp-content/uploads/underline-right-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>Learn more exploring <a href="https://codepen.io/jensimmons/pen/wvVVaJJ/d7756725e3ffbd00e7f79f0b8dac5a75?editors=1100" rel="noreferrer" target="_blank">this demo</a>.</figcaption></figure>
<p>Now that Safari 18.2 supports <code>text-underline-position: right</code>, the User Agent defaults for both underline position and text emphasis marks in have been changed for CJK languages.</p>
<h3><a name="ruby" rel="noreferrer" target="_blank"></a>Ruby</h3>
<p>WebKit for Safari 18.2 adds support for three <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ruby" rel="noreferrer" target="_blank">Ruby</a> properties:  <code>ruby-align</code>, <code>ruby-overhang</code>, and the now-unprefixed <code>ruby-position</code>.</p>
<p>The <code>ruby-align</code> property is reminiscent of the alignment properties of Flexbox, Grid, and (<a href="https://caniuse.com/mdn-css_properties_align-content_block_context" rel="noreferrer" target="_blank">as of March 2024</a>) block layout. It provides a mechanism for shifting where ruby annotations appear — whether they group together at the start, or in the center, or spread out with equal amounts of space in-between, or equal amounts of space between &amp; around the annotations.</p>
<figure class="mattewhite fill-image ruby"><picture><source srcset="https://webkit.org/wp-content/uploads/ruby-align-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>Learn more experimenting with <a href="https://codepen.io/jensimmons/pen/zxOqyrR?editors=1100" rel="noreferrer" target="_blank">this demo</a>.</figcaption></figure>
<p>The<a href="https://www.w3.org/TR/css-ruby-1/#ruby-overhang" rel="noreferrer" target="_blank"><code>ruby-overhang</code></a> property let’s you control whether or not ruby annotations are allowed to spill over into the space above the neighboring character.</p>
<figure class="mattewhite fill-image ruby"><picture><source srcset="https://webkit.org/wp-content/uploads/ruby-overhang-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>Learn more by exploring <a href="https://codepen.io/jensimmons/pen/MWNNwRZ?editors=1100" rel="noreferrer" target="_blank">this demo</a>.</figcaption></figure>
<p>The difference can be subtle, but in the second version in the demo, with <code>ruby-overhang: none</code>, the two characters are more clearly separated so the reader can see that there are separate annotations for each. This does cause awkward inline spacing between characters, interrupting the rhythm of the main line of text — but doing so is helpful for beginner readers of textbooks, for example.</p>
<p>And last, Safari 18.2 unprefixes the <code>ruby-position</code> property. Supported since Safari 7 as <code>-webkit-ruby-position</code> with non-standard values, WebKit now supports the standardized values <code>over</code>, <code>under</code>, and <code>inter-character</code>.</p>
<figure class="mattewhite fill-image ruby"><picture><source srcset="https://webkit.org/wp-content/uploads/ruby-position-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>Learn more exploring <a href="https://codepen.io/jensimmons/pen/azoOgbq?editors=1100" rel="noreferrer" target="_blank">this demo</a>.</figcaption></figure>
<h3><a name="scrollbars" rel="noreferrer" target="_blank"></a>Scrollbars</h3>
<p>WebKit for Safari 18.2 adds support for <code>scrollbar-width</code> and <code>scrollbar-gutter</code>.  If you used computers 13-30 years ago, you’ll remember how different scrollbars used to be. They were always present. They had thick gutters with complex edges. And they included little up and down arrows for clicking on with a mouse. Fifteen years ago, WebKit <a href="https://webkit.org/blog/363/styling-scrollbars/" rel="noreferrer" target="_blank">introduced a way</a> to style these type of scrollbars through the <code>::-webkit-scrollbar</code> pseudo element.</p>
<p>Today, scrollbars are visually much simpler, often disappearing entirely when not in use. In response to these changes and after many discussions, the CSS Working Group decided to standardize a slimmed down set of tools for styling scrollbars.</p>
<p>The<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scrollbar-width" rel="noreferrer" target="_blank"><code>scrollbar-width</code></a> property provides three options. The default is <code>auto</code>. The <code>thin</code> value asks for thinner scrollbars. And <code>none</code> can be used to remove scrollbars entirely, while still maintaining a container that’s scrollable. On macOS, <code>scrollbar-width: thin</code> creates a thinner scrollbar. On iOS, iPadOS, and visionOS there is no change — iOS and iPadOS always use thin scrollbars.</p>
<p>The<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scrollbar-gutter" rel="noreferrer" target="_blank"><code>scrollbar-gutter</code></a>  property provides an opportunity to reserve a space for the scrollbar — the space in which the scrollbar will slide. However, <code>scrollbar-gutter</code> has zero effect anytime a browser is using “overlay scrollbars”. Overlay scrollbars are incredibly common these days. They slide overtop the content of the page, without a visible gutter. macOS, iOS, iPadOS and visionOS all use overlay scrollbars system-wide. On macOS, users can change this behavior if they desire, by going to  System Settings &gt; Appearance, and changing “Show scroll bars” to “Always”. Only then, and on some other operating systems, will the scrollbar take up space in the page layout.</p>
<p>The <code>scrollbar-gutter</code> property has three options: <code>auto</code>, <code>stable</code>, and <code>stable both-edges</code>. The initial value is <code>auto</code>, where space is only reserved when the scrollbar is visible — that is, when the box is set to <code>overflow: scroll</code>, or has <code>overflow: auto</code> + enough content to overflow. The <code>scrollbar: stable</code> rule lets you as a web developer instead ask that the gutter always reserves space, which can be helpful for creating layout consistency. The third option, <code>scrollbar-gutter: stable both-edges</code>, asks the browser to not only create a stable space always reserved for the scrollbar, but to also create that same amount of space on both edges of the box. You can see the result below.</p>
<figure class="mattewhite fill-image scrollbars"><picture><source srcset="https://webkit.org/wp-content/uploads/scrollbar-gutter-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>Website scrollbars in Safari 18.2 on macOS, with “Show scroll bars” set to “Always” — with and without enough content to cause a scrollbar to appear. Learn more by trying <a href="https://codepen.io/jensimmons/pen/abegVpZ/deb36e472bfb7aca623fc46e04e8fae4?editors=1100" rel="noreferrer" target="_blank">this demo</a> on macOS with overlay scrollbars instead, or on other operating systems.</figcaption></figure>
<h3><a name="scroll-to-text-fragments" rel="noreferrer" target="_blank"></a>Scroll to Text Fragments</h3>
<p>You might be familiar with anchor links in HTML, where you can send someone a link to a specific anchor on the page — if the web developer of that site created an anchor link for you to use. Scroll to Text Fragments is a tool that allows a user to create a link to any fragment of text on the page, whether or not the site’s developers thought to do so. Support for <a href="https://developer.mozilla.org/en-US/docs/Web/URI/Fragment/Text_fragments" rel="noreferrer" target="_blank">Scroll to Text Fragments</a> was added in <a href="https://webkit.org/blog/13399/webkit-features-in-safari-16-1/#scroll-to-text-fragment" rel="noreferrer" target="_blank">Safari 16.1</a>. Now in Safari 18.2, there’s an easy UI for creating a Text Fragment link.</p>
<p>Here’s how it works. First, go to a web page and highlight the text you want to target with your link. Then choose “Copy Link with Highlight” from the context menu.</p>
<figure class="mattewhite"><picture><source srcset="https://webkit.org/wp-content/uploads/text-fragment-dark-2.png" media="(prefers-color-scheme: dark)"></picture></figure>
<p>The URL looks like this: <code>https://webkit.org/blog/16214/background-clip-border-area/#:~:text=background%2Dclip:%20text</code>. When a user navigates to the URL, the browser will scroll the text fragment into view, and mark it with a persistent highlight.</p>
<p>WebKit for Safari 18.2 also adds support for the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::target-text" rel="noreferrer" target="_blank"><code>::target-text</code></a> pseudo-element. It provides a mechanism for the site’s web designer/developer to style text fragment link results for their site.</p>
<figure class="mattewhite"><picture><source srcset="https://webkit.org/wp-content/uploads/target-text-dark.png" media="(prefers-color-scheme: dark)"></picture><figcaption>The highlight that appears when a user enters a Scroll to Text Fragment URL can now be styled with the <code>::target-text</code> pseudo-element.</figcaption></figure>
<h3><a name="and-more-css" rel="noreferrer" target="_blank"></a>And more CSS</h3>
<p>WebKit for Safari 18.2 adds support in CSS selectors for <code>:is(:host)</code>. Previously<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is" rel="noreferrer" target="_blank"><code>:is()</code></a> and<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:host" rel="noreferrer" target="_blank"><code>:host()</code></a> were supported, but not in this particular combination.</p>
<p>WebKit for Safari 18.2 adds support for using the corner keywords <code>closest-corner</code> and <code>farthest-corner</code> in circle and ellipse shapes. You might recognize these keywords from the radial gradient syntax. It lets you clip an element with syntax like <code>clip-path: circle(closest-corner at 50px 50px)</code>.</p>
<p>WebKit for Safari 18.2 adds support for <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property/syntax#string" rel="noreferrer" target="_blank"><code>&lt;string&gt;</code></a> values of the  <code>syntax</code> descriptor for <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property" rel="noreferrer" target="_blank"><code>@property</code></a>.</p>
<pre><code class="css"><span class="keyword">@property</span> <span class="keyword">--foobar</span> {
   <span class="attribute">syntax</span>: <span class="string">"&lt;string&gt;"</span>;
}
</code></pre>
<p>Safari 18.2 adds support for <code>@page</code> margin descriptors.  And it adds support to <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@page" rel="noreferrer" target="_blank"><code>@page</code></a> for the Japanese standard paper sizes <code>jis-b4</code> and <code>jis-b5</code>. Also, the <code>size</code> property of <code>@page</code> now parses as a descriptor instead of a global property.</p>
<h2><a name="spatial-videos-and-photos" rel="noreferrer" target="_blank"></a>Spatial videos and photos</h2>
<p>Safari 18.2 in visionOS 2.2 now supports viewing spatial videos. You can <a href="https://support.apple.com/guide/iphone/spatial-photos-record-videos-apple-vision-pro-iph6e3a6d4fe/ios" rel="noreferrer" target="_blank">record</a> a spatial video on Vision Pro, iPhone 15 Pro or any iPhone 16, or any camera that records MV-HEVC with spatial metadata. You can then publish it on the web with the HTML <code>video</code> element, just like any other video.</p>
<pre><code class="html"><span class="tag">&lt;<span class="keyword">video</span> <span class="keyword attribute">controls</span>&gt;</span>
  <span class="tag">&lt;<span class="keyword">source</span> <span class="keyword attribute">src</span>=<span class="attribute value string">"birthdayparty.mov"</span> <span class="keyword attribute">type</span>=<span class="attribute value string">"video/quicktime; codecs=hvc1.1.6.L123.B0"</span> /&gt;</span> <span class="comment">&lt;!-- spatial video --&gt;</span>
  <span class="tag">&lt;<span class="keyword">source</span> <span class="keyword attribute">src</span>=<span class="attribute value string">"birthdayparty.webm"</span> <span class="keyword attribute">type</span>=<span class="attribute value string">"video/webm"</span> /&gt;</span>
<span class="tag">&lt;/<span class="keyword">video</span>&gt;</span> 
</code></pre>
<p>Any browser that <a href="https://caniuse.com/hevc" rel="noreferrer" target="_blank">supports HEVC video</a> will play the spatial video file as 2D video on the webpage. In visionOS, Safari 18.2 provides UI alongside the rest of the video controls to allow users to tap to view the video spatially. On first tap, the video appears in a floating frame as the Safari window disappears. Then when the user taps again, the video further expands to create a more immersive experience. When they exit the video, the Safari window returns.</p>
<p>Safari 18.2 in visionOS 2.2 also adds additional support for viewing spatial photos.</p>
<p>Anytime you embed a spatial photo in a web page, it appears inline in 2D, just like any other photo. Starting with <a href="https://webkit.org/blog/15865/webkit-features-in-safari-18-0/#:~:text=you%20can%20use%20the%20JavaScript%20Fullscreen%20API" rel="noreferrer" target="_blank">Safari 18.0 for visionOS</a>, as a web developer, you could use the JavaScript Fullscreen API to provide a mechanism for spatial photos to escape the webpage and be immersive.</p>
<p>Now, in Safari 18.2, users can view any spatial photo by pinching and holding it, and then selecting “View Spatial Photo”.</p>
<figure></figure>
<p>You can continue to use Fullscreen API on spatial photos if you’d like to make your own UI. It now also works on spatial videos. They are displayed in a stereoscopic portal with a button allowing users to fully immerse themselves in the content.</p>
<h2><a name="webxr" rel="noreferrer" target="_blank"></a>WebXR</h2>
<p>WebKit for Safari 18.2 in visionOS 2.2 adds support to re-project WebXR content converting depth from forward-Z to reverse-Z. And now, the WebXR Session now includes the <code>enabledFeatures</code> property. When you request an XRSession you list the <code>optionalFeatures</code> and <code>requiredFeatures</code> for your WebXR experience. The <code>enabledFeatures</code> property tells you which features were granted without needing to feature detect them.</p>
<h2><a name="genmoji" rel="noreferrer" target="_blank"></a>Genmoji</h2>
<figure class="mattewhite fill-image"><picture><source srcset="https://webkit.org/wp-content/uploads/genmoji-dark.png" media="(prefers-color-scheme: dark)"></picture></figure>
<p>WebKit on iOS 18.2 and iPadOS 18.2 adds support for Genmoji. Make a brand-new Genmoji right in the keyboard. Provide a description to see a preview, and adjust your description until you’ve got the perfect custom emoji.</p>
<p>In Safari 18.2, you can post the Genmoji you’ve created to the web. They get added to content as images.</p>
<p>WKWebView supports the full <code>NSAdaptiveImageGlyph</code> API, via the <code>supportsAdaptiveImageGlyph</code> property on <code>WKWebViewConfiguration</code>, making it possible to support adaptive image glyphs in your app. Learn more by watching <a href="https://developer.apple.com/videos/play/wwdc2024/10220/" rel="noreferrer" target="_blank">Bring expression to your app with Genmoji</a> from WWDC24.</p>
<h2><a name="media" rel="noreferrer" target="_blank"></a>Media</h2>
<p>WebKit for Safari 18.2 adds support for allowing websites to override the system-default accessibility caption styling.  Web Video Text Tracks (<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API" rel="noreferrer" target="_blank">WebVTT</a>) are the web’s system for creating subtitles and captions. As a developer, you can style these text tracks with the<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::cue" rel="noreferrer" target="_blank"><code>::cue</code></a> pseudo-element. In the system accessibility settings on Apple platforms, users can select a system-default caption style, or create their own custom style. Previously, the system-default caption styles would override the website’s styles. Now, system-default caption styles are always overridable, but users may still create custom styles, and prevent those styles from being overridden by the page.</p>
<p>WebKit for Safari 18.2 now adds a fallback image to Now Playing when a website doesn’t specify one in MediaSession metadata.</p>
<h2><a name="html" rel="noreferrer" target="_blank"></a>HTML</h2>
<figure class="mattewhite"><picture><source srcset="https://webkit.org/wp-content/uploads/input-week-dark.png" media="(prefers-color-scheme: dark)"></picture></figure>
<p>Safari 18.2 adds support for <code>input type=week</code> on iOS, iPadOS, and visionOS.</p>
<p>WebKit for Safari 18.2 adds support for <code>blocking=render</code> attribute for <code>&lt;script&gt;</code> and <code>&lt;style&gt;</code>. It allows you to tell the browser to block presenting the rendered page until that particular script or style file is run. This is the default behavior of many resources for a web page, so it’s not often needed. But it’s here if you find yourself in a situation where such a tool (such as a <code>&lt;script&gt;</code> with the <code>async</code> attribute) would be handy. WebKit for Safari 18.2 also adds support for Document render-blocking with <code>&lt;link rel=expect&gt;</code>. It similarly causes the page to be render-blocked until the essential parts of the document are parsed so it will render consistently. These two tools can be especially useful for cross-document View Transitions, where you might want more control over what must be loaded before the animation snapshots can be taken.</p>
<h2><a name="webassembly" rel="noreferrer" target="_blank"></a>WebAssembly</h2>
<p>WebKit for Safari 18.2 adds support for <a href="https://github.com/WebAssembly/gc" rel="noreferrer" target="_blank">WASM Garbage Collection</a>. It allows WebAssembly modules to define a variety of new reference types whose memory is managed automatically by the browser. These types range from simple data types like structs and arrays, to more complex type relationships such as subtyping and recursion. Without WASM GC, source languages that rely on garbage collection (such as Java, C#, Kotlin, Go, and others) generally have to write their own garbage collectors and compile them to WebAssembly. This poses a significant barrier when targeting WebAssembly. Due to the limitations of WebAssembly memory, these collectors are often forced to use less efficient implementation techniques and can’t easily interface with JavaScript. With WASM GC, these languages can often directly express their type system in WebAssembly, making it easier to target. Once running in WebAssembly, these languages can leverage the same native garbage collector the browser uses to manage JavaScript objects, which simplifies JS/WASM interoperability and often improves performance.</p>
<p>WebKit for Safari 18.2 also adds support for <a href="https://github.com/WebAssembly/tail-call" rel="noreferrer" target="_blank">WASM Tail Calls</a>, which allows WebAssembly modules to call functions while reusing the current stack frame. Tail calls can asymptotically reduce memory usage for recursive algorithms, which enables functional programming patterns to be directly expressed in WebAssembly. Tail calls can also be used to efficiently express state machines, which can be used to improve the performance of interpreters and emulators compiled to WebAssembly.</p>
<h2><a name="web-api" rel="noreferrer" target="_blank"></a>Web API</h2>
<p>WebKit brings significant improvements to Pointer Events in Safari 18.2, including updating <code>click</code>, <code>contextmenu</code>, and <code>click()</code> to use<a href="https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent" rel="noreferrer" target="_blank"><code>PointerEvent</code></a> giving developers access to the <code>pointerType</code> property on these events.  There’s also new support support for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/auxclick_event" rel="noreferrer" target="_blank"><code>auxclick</code></a> event that is triggered when a non-primary pointing device is pressed and released.</p>
<p>New PointerEvent methods <code>getPredictedEvents()</code> and <code>getCoalescedEvents()</code> are now supported. The <code>getPredictedEvents()</code> method returns a sequence of PointerEvent instances that are estimated future pointer positions, based on past points, current velocity, and trajectory. The <code>getCoalescedEvents()</code> method returns a sequence of <code>PointerEvent</code> instances that were coalesced (merged) into a single <code>pointermove</code>.</p>
<p>And WebKit for Safari 18.2 now supports  <code>altitudeAngle</code> and <code>azimuthAngle</code>, letting you easily determine the angle between Apple Pencil and the X-Y or Y-Z planes of the screen. The first of these read-only properties represents the angle between a pointer or stylus axis and the X-Y plane of a device screen. The second represents the angle between the Y-Z plane and the plane containing both the pointer or stylus axis and the Y axis.</p>
<p>Additional Web API enhancements in WebKit includes support for <code>NavigationActivation.finished</code> handling and implementation of a specification update that provides a new initial focus algorithm for the <code>&lt;dialog&gt;</code> element.</p>
<h2><a name="javascript" rel="noreferrer" target="_blank"></a>JavaScript</h2>
<p>WebKit for Safari 18.2 introduces several enhancements to JavaScript, including a new TypedArray — the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float16Array" rel="noreferrer" target="_blank">Float16Array</a> — to complement the existing <code>Float32Array</code> and <code>Float64Array</code>. This array represents 16-bit floating point numbers in platform byte order.</p>
<p>The update also adds support for<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/toBase64" rel="noreferrer" target="_blank"><code>Uint8Array.prototype.toBase64</code></a> and<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/toHex" rel="noreferrer" target="_blank"><code>Uint8Array.prototype.toHex</code></a>, as well as for<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/fromBase64" rel="noreferrer" target="_blank"><code>Uint8Array.fromBase64</code></a>, and<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/setFromBase64" rel="noreferrer" target="_blank"><code>Uint8Array.prototype.setFromBase64</code></a>.</p>
<p>Enhancements to the<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale" rel="noreferrer" target="_blank"><code>Intl.Locale</code></a> object now has support for <code>firstDayOfWeek</code>. It returns information about which day is considered the first day of the week in specific locations.</p>
<p>There is also new support for the<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/try" rel="noreferrer" target="_blank"><code>Promise.try</code></a> static method and for <code>RegExp.escape</code>.</p>
<p>WebKit for Safari 18.2 adds support for type reflection for <code>WebAssembly.Module.imports</code> and <code>WebAssembly.Module.exports</code>.</p>
<p>Iterator improvements include <code>Iterator.prototype.constructor</code> and  <code>Iterator.prototype[@@toStringTag]</code>, and <code>Iterator.from</code> as part of the Iterator Helpers Proposal.</p>
<h2><a name="security-and-privacy" rel="noreferrer" target="_blank"></a>Security and Privacy</h2>
<p>Safari 18.2 on iOS, iPadOS, and visionOS will always try to load webpages over secure connections first, i.e. HTTPS by default. Only if the secure page load fails will Safari fall back to non-secure HTTP.</p>
<p>In addition, on all platforms, Safari 18.2 also adds an optional Security setting to enforce secure connections and show a warning before attempting a non-secure fallback. The user then gets to choose if they want to cancel or continue over HTTP. The label of the setting is “Not Secure Connection Warning” on iOS, iPadOS, and VisionOS. It is “Warn before connecting to a website over a non-secure connection” on macOS.</p>
<h2><a name="web-inspector" rel="noreferrer" target="_blank"></a>Web Inspector</h2>
<p>WebKit for Safari 18.2 adds support for blackboxing ranges within a file, and adds support for sourcemaps to be blackboxed.</p>
<p>WebKit for Safari 18.2 also adds support for showing <code>boundThis</code> for arrow functions in the console.</p>
<h2><a name="webdriver" rel="noreferrer" target="_blank"></a>WebDriver</h2>
<p>WebKit for Safari 18.2 adds support for using a persistent website data store.</p>
<h2><a name="wkwebview" rel="noreferrer" target="_blank"></a>WKWebView</h2>
<p>WKWebView also adds support for <code>WKDownload.originatingFrame</code> and <code>WKDownload.userInitiated</code> API,  as well as for  <code>WKWebpagePreferences.UpgradeToHTTPSPolicy</code>.</p>
<h2><a name="bug-fixes-and-more" rel="noreferrer" target="_blank"></a>Bug Fixes and more</h2>
<p>In addition to all the new features, WebKit for Safari 18.2 includes work to polish existing features.</p>
<h3><a name="accessibility" rel="noreferrer" target="_blank"></a>Accessibility</h3>
<ul>
<li>Fixed <code>text-transform: full-size-kana</code> to not affect speech output. </li>
<li>Fixed element reflection attributes to be able to retrieve a disconnected element.</li>
<li>Fixed VoiceOver focus to activate PDF form fields when it lands on them.</li>
<li>Fixed tree updates becoming broken when children change for a dynamically ignored element and its unignored ancestor is in the same tree update cycle. </li>
<li>Fixed handling dynamically-created and nested <code>aria-modal</code> dialogs. </li>
<li>Fixed the accessibility tree to update when a text selection is cleared.</li>
</ul>
<h3><a name="browser" rel="noreferrer" target="_blank"></a>Browser</h3>
<ul>
<li>Fixed windows not getting restored after updating macOS. </li>
</ul>
<h3><a name="canvas" rel="noreferrer" target="_blank"></a>Canvas</h3>
<ul>
<li>Fixed CanvasRenderingContext2D <code>globalAlpha</code> property getting ignored for some values of <code>globalCompositeOperation</code>.</li>
</ul>
<h3><a name="css" rel="noreferrer" target="_blank"></a>CSS</h3>
<ul>
<li>Fixed backgrounds applied to a table row repeating in every table cell.</li>
<li>Fixed the <code>size</code> property of <code>@page</code> to parse as a descriptor, not a global CSS property.</li>
<li>Fixed <code>background-clip: text</code> to correctly paint text decorations. </li>
<li>Fixed <code>font-variant: small-caps normal;</code> to be invalid syntax.</li>
<li>Fixed <code>-webkit-line-clamp: none</code> to be parsable. </li>
<li>Fixed <code>text-underline-offset</code> to support percentages. </li>
<li>Fixed <code>text-decoration-thickness</code> to work on buttons.</li>
<li>Fixed the <code>lh</code> unit sometimes getting computed before <code>line-height</code> is resolved. </li>
<li>Fixed <code>touch-action</code> to use <code>pan-x pan-y</code> order when serializing.</li>
<li>Fixed serialization of <code>place-content</code>, <code>place-items</code>, and <code>place-self</code> properties.</li>
<li>Updated CSS Nesting to remove the hoisting behavior. </li>
<li>Fixed CSS Nested declarations inside a <code>@scope</code> to behave like <code>:where(:scope)</code>.</li>
<li>Disallow matching of <code>:has()</code> in CSS Nesting.</li>
<li>Improved scrollbar styling support for interoperability. </li>
<li>Fixed contrast between <code>ButtonFace</code> and <code>ButtonText</code> system colors in dark mode. </li>
<li>Fixed attribute <code>initial-value</code> makes the <code>@property</code> rule invalid for <code>[var(--x)]</code>.</li>
<li>Fixed invalidating attribute values when programmatically mutated so that page attribute selectors work as expected. </li>
</ul>
<h3><a name="editing" rel="noreferrer" target="_blank"></a>Editing</h3>
<ul>
<li>Aligned with the standardized version of the <code>autocorrect</code> attribute, which does not support Email, URL and Password fields and does not treat the empty string value in a special way. </li>
</ul>
<h3><a name="forms" rel="noreferrer" target="_blank"></a>Forms</h3>
<ul>
<li>Fixed <code>HTMLSelectElement.prototype.add</code> with <code>optgroup</code> elements.</li>
</ul>
<h3><a name="history" rel="noreferrer" target="_blank"></a>History</h3>
<ul>
<li>Fixed using Cross-Origin-Opener-Policy HTTP header disabling the back-forward cache.</li>
</ul>
<h3><a name="javascript" rel="noreferrer" target="_blank"></a>JavaScript</h3>
<ul>
<li>Fixed class field initializers to disallow <code>yield</code> and <code>await</code> expressions. </li>
<li>Fixed DestructuringAssignmentTarget to be evaluated prior to calling <code>[[Get]]</code> or a stepping iterator.</li>
<li>Fixed throwing an exception for negative exponent in BigInt in the JIT compiler. </li>
<li>Fixed RegExp range quantifier to allow 2^53 – 1. </li>
<li>Fixed <code>Uint8Array#setFromBase64</code> to decode and write chunks which occur prior to bad data.</li>
<li>Disallowed <code>yield</code> and <code>await</code> expressions in class field initializers. </li>
<li>Fixed TimeZone without Time to be rejected in ISO8601 strings.</li>
<li>Fixed <code>Object.keys(global)</code> including non-enumerable properties unless deleted first.</li>
<li>Fixed the error message of <code>Temporal.Instant.fromEpochMilliseconds</code>. </li>
<li>Fixed duration format’s nanoseconds calculation ordering.</li>
<li>Fixed TimeZoneAnnotation to disallow sub-minute.</li>
<li><code>Temporal.Instant.prototype.epochMilliseconds</code> now returns a floored value. </li>
<li>Improved the TypeError message when a WeakMap constructor takes an iterable that yields invalid entry.</li>
<li>Fixed incorrect SyntaxError when destructuring <code>let</code>. </li>
<li>Removed the obsoleted <code>Temporal.Instant</code> API. </li>
</ul>
<h3><a name="media" rel="noreferrer" target="_blank"></a>Media</h3>
<ul>
<li>Fixed fullscreen error handling to include error messages. </li>
<li>Fixed <code>audioTrack.configuration()</code> values for WebM files. </li>
</ul>
<h3><a name="pdf" rel="noreferrer" target="_blank"></a>PDF</h3>
<ul>
<li>Fixed a hang that could occur using the Select All keyboard shortcut ⌘A (Command-A) on a PDF causing all pages to be blank. </li>
</ul>
<h3><a name="rendering" rel="noreferrer" target="_blank"></a>Rendering</h3>
<ul>
<li>Fixed non-separable blend modes in <code>mix-blend-mode</code> to workon elements in compositing layers. </li>
<li>Fixed MathML to layout invalid markup as an <code>&lt;mrow&gt;</code>.</li>
<li>Improved grid track sizing by adding support for wrapped column flex containers, multi-column containers, and items with aspect ratios that depend on row size.</li>
<li>Fixed margins used for grid items on relayout. </li>
<li>Fixed grid areas to be considered in layout overflow. </li>
<li>Fixed grid area overflow to include inline end and block end padding. </li>
<li>Fixed items that span multiple tracks with optimizations. </li>
<li>Fixed rendering image content with percentage height in a container with <code>height: auto</code>. </li>
<li>Fixed an extra wrap when a table with mixed <code>white-space</code> values applied to the table and table content.</li>
<li>Fixed repeating <code>background-image</code> sized to the <code>content-box</code> failing to fill the viewport in an iframe.  </li>
<li>Fixed rendering tick marks of the range input type when the page zoom is less than 1. </li>
</ul>
<h3><a name="security" rel="noreferrer" target="_blank"></a>Security</h3>
<ul>
<li>Fixed an empty origin in the location permission prompt for a <code>blob://</code> resource.</li>
<li>Fixed <code>javascript:</code> URL navigation to another browsing context created from <code>window.open</code> not checking the source’s Content Security Policy.</li>
</ul>
<h3><a name="svg" rel="noreferrer" target="_blank"></a>SVG</h3>
<ul>
<li>Fixed correctly applying <code>clip-path</code> to the SVG element.</li>
<li>Fixed zooming in or out of an SVG with <code>transform-origin</code>. </li>
<li>Fixed an issue for <code>getPointAtLength</code> to throw an exception when <code>path</code> is empty. </li>
<li>Fixed <code>fill</code> to not be considered a presentation attribute on animation elements. </li>
<li>Fixed script elements in XHTML documents to work when trusted types are enforced. </li>
<li>Removed non-standard <code>hasExtension</code>. </li>
</ul>
<h3><a name="web-animations" rel="noreferrer" target="_blank"></a>Web Animations</h3>
<ul>
<li>Fixed <code>alignment-baseline</code> and <code>buffered-rendering</code> to support discrete animation.</li>
<li>Fixed <code>hanging-punctuation</code> to support discrete animation. </li>
<li>Fixed <code>scroll-snap-</code> properties to support discrete animation.</li>
<li>Fixed <code>column-span</code> to support discrete animation. </li>
<li>Fixed <code>appearance</code> to support discrete animation. </li>
<li>Fixed <code>hyphenate-character</code> to support discrete animation. </li>
<li>Fixed <code>font-optical-sizing</code> to support discrete animation.</li>
<li>Fixed <code>image-rendering</code> to support discrete animation.</li>
<li>Improved animation support for shorthands. </li>
<li>Fixed the <code>mask-border-</code> properties to be animatable.</li>
<li>Fixed <code>stroke-color</code> to be animatable. </li>
<li>Fixed transform animations that jump back and forth instead of animating continuously. </li>
</ul>
<h3><a name="web-api" rel="noreferrer" target="_blank"></a>Web API</h3>
<ul>
<li>Fixed the Pointer Lock API to work when Fullscreen API is enabled.</li>
<li>Fixed pointer events generated from platform mouse events to use the platform event’s timestamp. </li>
<li>Aligned <code>oncuechange</code> event handler handling with other event handlers.</li>
<li>Fixed two <code>mousemove</code> events dispatched when the mouse enters a web view window instead of a single one. </li>
<li>Fixed Pointer Events created for pointer capture to be trusted and composed. </li>
<li>Fixed checking against the “active document” of the pointer when setting the pointer capture.</li>
<li>Removed support for the non-standard “overflow” event.</li>
<li>Moved <code>onbeforeinput</code> to <code>GlobalEventHandlers</code>.</li>
<li>Fixed <code>popovertarget</code> to work on buttons in a form.</li>
<li>Fixed popover tab navigation. </li>
<li>Fixed the directionality of non-HTML elements. </li>
<li>Fixed the directionality of shadow trees. </li>
<li>Fixed setting <code>.value =</code> to update <code>dir=auto</code> inputs.</li>
<li>Fixed <code>XMLSerializer.serializeToString()</code> not serializing the children of <code>&lt;img&gt;</code> and also not closing the <code>&lt;img&gt;</code> if it has children.</li>
<li>Fixed text highlights when selecting large text that ends with a common phrase.</li>
<li>Fixed copying a link to a common term in an article resulting in an incorrect part of the page being highlighted. </li>
<li>Fixed <code>scrollIntoView(...</code>for SVG elements. </li>
<li>Fixed non-modal popover dialog blocking interaction on the content behind it. </li>
<li>Fixed <code>pushManager.subscribe</code> returning an empty endpoint.</li>
</ul>
<h3><a name="web-apps" rel="noreferrer" target="_blank"></a>Web Apps</h3>
<ul>
<li>Fixed Web Application Manifest parsing to trim all ASCII whitespace. </li>
</ul>
<h3><a name="webdriver" rel="noreferrer" target="_blank"></a>WebDriver</h3>
<ul>
<li>Fixed WebDriver to use pointer origin rather than viewport origin for state location resolution. </li>
<li>Fixed chorded mouse interactions by ensuring input dispatch logic correctly interprets successive mousepress or mouserelease actions with different <code>button</code> values.</li>
<li>Fixed WebDriver sometimes taking screenshots with a transparent grey line at the top and no rounded corners. </li>
<li>Fixed an issue where all script evaluation was unconditionally performed with user activation.</li>
</ul>
<h3><a name="web-inspector" rel="noreferrer" target="_blank"></a>Web Inspector</h3>
<ul>
<li>Fixed parsing attributes added when editing the tag name.</li>
<li>Fixed an issue where multi-line content in the Console prompt was not scrollable.</li>
</ul>
<h3><a name="webxr" rel="noreferrer" target="_blank"></a>WebXR</h3>
<ul>
<li>Fixed audio not audible during an immersive session in visionOS. </li>
</ul>
<h3><a name="wkwebview" rel="noreferrer" target="_blank"></a>WKWebView</h3>
<ul>
<li>Fixed apps crashing intermittently crashing at launch. </li>
<li>Fixed <code>-[WKWebViewConfiguration writingToolsBehavior]</code> not available when using a deployment target lower than iOS 18. (FB15297419)  </li>
<li>Fixed text editing corruption after <code>[NSInputAnalytics didInsertText:]</code> is called without a session beginning. </li>
</ul>
<h2><a name="updating-to-safari-18-2" rel="noreferrer" target="_blank"></a>Updating to Safari 18.2</h2>
<p>Safari 18.2 is available on <a href="https://www.apple.com/ios/ios-18/" rel="noreferrer" target="_blank">iOS 18.2</a>, <a href="https://www.apple.com/ipados/ipados-18/" rel="noreferrer" target="_blank">iPadOS 18.2</a>, <a href="https://www.apple.com/macos/macos-sequoia/" rel="noreferrer" target="_blank">macOS Sequoia</a>, macOS Sonoma, macOS Ventura, and in <a href="https://www.apple.com/visionos/visionos-2/" rel="noreferrer" target="_blank">visionOS 2.2</a>.</p>
<p>If you are running macOS Sonoma or macOS Ventura, you can update Safari by itself, without updating macOS. Go to  &gt; System Settings &gt; General &gt; Software Update and click “More info…” under Updates Available.</p>
<p>To get the latest version of Safari on iPhone, iPad or Apple Vision Pro, go to Settings &gt; General &gt; Software Update, and tap to update.</p>
<h2><a name="feedback" rel="noreferrer" target="_blank"></a>Feedback</h2>
<p>We love hearing from you. To share your thoughts, find Jen Simmons on <a href="https://bsky.app/profile/jensimmons.bsky.social" rel="noreferrer" target="_blank">Bluesky</a> / <a href="https://front-end.social/@jensimmons" rel="noreferrer" target="_blank">Mastodon</a> and Jon Davis on <a href="https://bsky.app/profile/jondavis.bsky.social" rel="noreferrer" target="_blank">Bluesky</a> / <a href="https://mastodon.social/@jondavis" rel="noreferrer" target="_blank">Mastodon</a>. You can follow WebKit <a href="https://www.linkedin.com/in/apple-webkit/" rel="noreferrer" target="_blank">on LinkedIn</a> or <a href="http://x.com/webkit" rel="noreferrer" target="_blank">X</a>. If you run into any issues, we welcome your <a href="https://feedbackassistant.apple.com/" rel="noreferrer" target="_blank">feedback</a> on Safari UI (learn more about <a href="https://developer.apple.com/bug-reporting/" rel="noreferrer" target="_blank">filing Feedback</a>), or your <a href="https://bugs.webkit.org/" rel="noreferrer" target="_blank">WebKit bug report</a> about web technologies or Web Inspector. If you run into a website that isn’t working as expected, please file a report at <a href="https://webcompat.com/" rel="noreferrer" target="_blank">webcompat.com</a>. Filing issues really does make a difference.</p>
<p>Download the latest <a href="https://developer.apple.com/safari/technology-preview/" rel="noreferrer" target="_blank">Safari Technology Preview</a> on macOS to stay at the forefront of the web platform and to use the latest Web Inspector features.</p>
<p>You can also find this information in the <a href="https://developer.apple.com/documentation/safari-release-notes/" rel="noreferrer" target="_blank">Safari 18.2 release notes</a>.</p>
<p></p></div>
		<div class="content-meta">
			<time datetime=2024-12-09T18:25:05.000Z>9 December 2024</time>
			<a href="/urls/webkit-org-feed-rss">webkit.org/feed/rss/</a>
			<div> <a href="/tags/web-platform.html">web-platform</a> |  <a style="font-weight: bold" href="/tags/source.html">source</a></div>
		</div>
	</main>
		<footer>
			<nav>
				<a href="/">Home</a>
				<a href="/tags">Tags</a>
				<a href="/urls">URLs</a>
				<a rel="noreferrer" target="_blank" href="https://github.com/thoughtsunificator/rss-feed-static-generator">Source code</a>
			</nav>
		</footer>
		<script src="/highlight.min.js"></script>
		<script>hljs.highlightAll();</script>
		</body>
</html>